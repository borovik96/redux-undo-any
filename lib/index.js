'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.undoAction=void 0;var _redux=require('redux'),_isPlainObject=require('./utils/isPlainObject'),_isPlainObject2=_interopRequireDefault(_isPlainObject);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var REPLACE_STATE_ACTION='redux-undo-any/REPLACE_STATE_ACTION',UNDO_ACTION='redux-undo-any/UNDO_ACTION',undoAction=exports.undoAction=function(a){return{type:UNDO_ACTION,test:a}},replaceState=function(a){return{type:REPLACE_STATE_ACTION,state:a}},hackReducer=function(a){return function(b,c){return c.type===REPLACE_STATE_ACTION?c.state:a(b,c)}},getActionsApplier=function(a){return function(b,c){return c.reduce(function(b,c){return a(b,c)},b)}},clearAction=function(a){return'PERFORM_ACTION'===a.type?a.action:a},createStoreCreator=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.actionHistorySize,c=b===void 0?1e3:b,d=void 0,e=[],f=function(a,b,g){if('function'==typeof b&&'undefined'==typeof g&&(g=b,b=void 0),'undefined'!=typeof g){if('function'!=typeof g)throw new Error('Expected the enhancer to be a function.');return g(f)(a,b)}var h=(0,_redux.createStore)(hackReducer(a),b);d=h.getState();var i=h.replaceReducer;h.replaceReducer=function(b){if('function'!=typeof b)throw new Error('Expected the nextReducer to be a function.');return a=b,i(hackReducer(b))};var j=getActionsApplier(a),k=h.dispatch,l=function(b){if(!(0,_isPlainObject2.default)(b))throw new Error('Actions must be plain objects. Use custom middleware for async actions.');e.length>c&&(d=a(d,e[0]),e.shift());var f=clearAction(b);if(f.type!==REPLACE_STATE_ACTION&&e.push(b),f.type!==UNDO_ACTION)k(b);else if(f.test){var g=e.filter(function(b){return!f.test(clearAction(b))});if(g.length){var h=j(d,g);k(replaceState(h))}}};if(g){var m=g(function(){return{getState:h.getState,dispatch:l}})(a,b);h.dispatch=m.dispatch}else h.dispatch=l;return h};return f};exports.default=createStoreCreator;
'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};Object.defineProperty(exports,'__esModule',{value:!0});exports.default=isPlainObject;function isPlainObject(a){if('object'!==('undefined'==typeof a?'undefined':_typeof(a))||null===a)return!1;for(var b=a;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===proto}
